<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Tools in Systematic Reviews and Meta-Analyses</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes tooltipFadeIn {
            from {
                opacity: 0;
                transform: translateY(-8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tool-circle-container {
            position: relative;
        }

        .tool-circle-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 212, 255, 0.95);
            color: #0f1419;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
            margin-bottom: 8px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
        }

        .tool-circle-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 4px solid transparent;
            border-right: 4px solid transparent;
            border-top: 4px solid rgba(0, 212, 255, 0.95);
        }

        .tool-circle-container:hover .tool-circle-tooltip {
            opacity: 1;
            visibility: visible;
            animation: tooltipFadeIn 0.2s ease-out;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a2332 50%, #141e2a 100%);
            background-attachment: fixed;
            color: #ffffff;
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 60px;
            animation: slideDown 0.8s ease-out;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            letter-spacing: 0.8px;
            background: linear-gradient(135deg, #00d4ff 0%, #0099ff 50%, #6c63ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeIn 0.8s ease-out;
        }

        .header p {
            font-size: 1.125rem;
            color: rgba(255, 255, 255, 0.6);
            max-width: 48rem;
            margin: 0 auto;
            animation: fadeIn 0.8s ease-out 0.2s both;
        }

        /* Stage Progress Indicator */
        .stage-progress {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 3rem;
            justify-content: center;
            flex-wrap: wrap;
            align-items: center;
            animation: fadeIn 0.8s ease-out 0.3s both;
        }

        .stage-button-wrapper {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .stage-button {
            height: 3rem;
            padding: 0 1.25rem;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.875rem;
            border: 1.5px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            letter-spacing: 0.5px;
        }

        .stage-button:hover {
            background: rgba(255, 255, 255, 0.12);
            color: rgba(255, 255, 255, 0.9);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 12px rgba(100, 150, 255, 0.1);
            transform: translateY(-2px);
        }

        .stage-button.active {
            color: #ffffff;
            font-weight: 700;
            background: rgba(0, 212, 255, 0.15);
            border-color: rgba(0, 212, 255, 0.3);
            box-shadow: 0 8px 20px rgba(0, 212, 255, 0.15);
        }

        .stage-divider {
            height: 2px;
            width: 2rem;
            background: rgba(255, 255, 255, 0.15);
        }

        /* Main Card - Elegant Glass Morphism */
        .main-card {
            background: rgba(20, 30, 48, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05);
            margin-bottom: 2rem;
            overflow: hidden;
            animation: fadeIn 0.8s ease-out 0.4s both;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            position: relative;
        }

        .main-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            pointer-events: none;
        }

        .main-card:hover {
            border-color: rgba(255, 255, 255, 0.12);
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.08);
            transform: translateY(-4px);
        }

        .stage-header {
            padding: 2.5rem 2.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            background: rgba(0, 0, 0, 0.1);
        }

        .stage-header h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            letter-spacing: 0.5px;
        }

        .stage-header p {
            color: rgba(255, 255, 255, 0.65);
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Content Area */
        .stage-content {
            padding: 2.5rem;
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        }

        .metric-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }

        .metric-label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #fff;
            letter-spacing: -1px;
        }

        /* Tools Section */
        .tools-section {
            margin-bottom: 2.5rem;
        }

        .tools-section h3 {
            font-size: 1.1rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 1.5rem;
            letter-spacing: 0.5px;
        }

        .top-tools-grid {
            display: grid;
            gap: 1rem;
        }

        .tool-card {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 1.25rem;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            position: relative;
            overflow: hidden;
        }

        .tool-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            transition: left 0.5s ease;
            pointer-events: none;
        }

        .tool-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(100, 150, 255, 0.1);
        }

        .tool-card:hover::before {
            left: 100%;
        }

        .tool-card a {
            text-decoration: none;
            color: inherit;
            display: flex;
            align-items: center;
            width: 100%;
            gap: 1rem;
        }

        .tool-rank {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
            font-size: 0.85rem;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(108, 99, 255, 0.2));
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tool-info {
            flex: 1;
            min-width: 0;
        }

        .tool-name {
            font-weight: 600;
            color: #fff;
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .tool-usage {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.55);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .tool-link-icon {
            width: 1.25rem;
            height: 1.25rem;
            color: rgba(255, 255, 255, 0.5);
            transition: color 0.3s ease;
            flex-shrink: 0;
            margin-left: auto;
        }

        .tool-card:hover .tool-link-icon {
            color: rgba(255, 255, 255, 0.85);
        }

        /* All Tools Grid */
        .all-tools-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            max-height: 24rem;
            overflow-y: auto;
            padding-right: 0.5rem;
        }

        .all-tools-grid::-webkit-scrollbar {
            width: 6px;
        }

        .all-tools-grid::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .all-tools-grid::-webkit-scrollbar-thumb {
            background: rgba(100, 200, 255, 0.3);
            border-radius: 3px;
            transition: background 0.3s ease;
        }

        .all-tools-grid::-webkit-scrollbar-thumb:hover {
            background: rgba(100, 200, 255, 0.5);
        }

        .all-tool-item {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            padding: 0.75rem 1rem;
            font-size: 0.85rem;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.320, 1);
            text-decoration: none;
            color: rgba(255, 255, 255, 0.75);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .all-tool-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.03), transparent);
            transition: left 0.4s ease;
            pointer-events: none;
        }

        .all-tool-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.12);
            color: rgba(255, 255, 255, 0.95);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(100, 150, 255, 0.08);
        }

        .all-tool-item:hover::before {
            left: 100%;
        }

        .tool-frequency-badge {
            font-size: 0.7rem;
            background: rgba(100, 200, 255, 0.15);
            padding: 0.25rem 0.6rem;
            border-radius: 9999px;
            color: rgba(100, 200, 255, 0.8);
            font-weight: 600;
            flex-shrink: 0;
            border: 1px solid rgba(100, 200, 255, 0.2);
        }

        /* Navigation */
        .navigation {
            display: flex;
            gap: 1rem;
            margin-bottom: 3rem;
            justify-content: center;
            animation: fadeIn 0.8s ease-out 0.5s both;
        }

        .nav-button {
            width: 3rem;
            height: 3rem;
            border-radius: 9999px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            backdrop-filter: blur(10px);
        }

        .nav-button:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.2);
            color: #fff;
            box-shadow: 0 4px 12px rgba(100, 150, 255, 0.1);
            transform: translateY(-2px);
        }

        /* Footer */
        .footer {
            text-align: center;
            color: rgba(255, 255, 255, 0.45);
            font-size: 0.85rem;
            max-width: 32rem;
            margin-bottom: 2rem;
            animation: fadeIn 0.8s ease-out 0.6s both;
        }

        /* Control Buttons */
        .header button {
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: blur(10px);
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .header button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.08), transparent);
            transition: left 0.5s ease;
            pointer-events: none;
        }

        .header button:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            box-shadow: 0 4px 16px rgba(100, 150, 255, 0.1);
            transform: translateY(-2px);
        }

        .header button:hover::before {
            left: 100%;
        }

        /* Visualizations Card */
        #visualizations-card {
            animation: fadeIn 0.8s ease-out;
        }

        /* Scrollbar Styling */
        html {
            scroll-behavior: smooth;
        }

        ::selection {
            background: rgba(100, 200, 255, 0.3);
            color: #ffffff;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.02);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(100, 200, 255, 0.25);
            border-radius: 4px;
            transition: background 0.3s ease;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(100, 200, 255, 0.4);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .header h1 {
                font-size: 2rem;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.75rem;
            }

            .header p {
                font-size: 0.95rem;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .all-tools-grid {
                grid-template-columns: 1fr;
            }

            .stage-progress {
                gap: 0.5rem;
            }

            .stage-divider {
                display: none;
            }

            .stage-button {
                font-size: 0.75rem;
                padding: 0 0.75rem;
                height: 2.5rem;
            }

            .main-card {
                border-radius: 16px;
            }

            .stage-content {
                padding: 1.5rem;
            }

            .stage-header {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>AI Tools in Systematic Reviews and Meta-analyses</h1>
            <p>A storytelling journey through the four stages of systematic review research</p>
            <div style="margin-top: 1.5rem; display: flex; gap: 0.75rem; justify-content: center; flex-wrap: wrap;">
                <button id="resources-btn" onclick="toggleResources()" style="padding: 0.75rem 1.5rem; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: rgba(255, 255, 255, 0.9); border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.5rem;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                    </svg>
                    Research Resources
                </button>
                <button id="visualizations-btn" onclick="toggleVisualizations()" style="padding: 0.75rem 1.5rem; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: rgba(255, 255, 255, 0.9); border-radius: 6px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.5rem;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="23 6 13.5 15.5 8.5 10.5 1 17"/><polyline points="17 6 23 6 23 12"/>
                    </svg>
                    Visualizations
                </button>
            </div>
        </div>

        <!-- Stage Progress Indicator -->
        <div class="stage-progress" id="stage-progress"></div>

        <!-- Main Card -->
        <div class="main-card" id="stage-card">
            <div class="stage-header" id="stage-header"></div>
            <div class="stage-content" id="stage-content"></div>
        </div>

        <!-- Research Resources Card -->
        <div class="main-card" id="resources-card" style="display: none;">
            <div class="stage-header" style="background: rgba(255, 255, 255, 0.05); border-bottom-color: rgba(255, 255, 255, 0.1);">
                <h2>Research Resources</h2>
                <p id="resources-count"></p>
            </div>
            <div class="stage-content" id="resources-content"></div>
        </div>

        <!-- Visualizations Card -->
        <div class="main-card" id="visualizations-card" style="display: none;">
            <div class="stage-header" style="background: rgba(255, 255, 255, 0.05); border-bottom-color: rgba(255, 255, 255, 0.1);">
                <h2>Data Visualizations</h2>
                <p style="color: rgba(255, 255, 255, 0.7);">Interactive insights into tools and research patterns</p>
            </div>
            <div class="stage-content" id="visualizations-content"></div>
        </div>

        <!-- Navigation -->
        <div class="navigation" id="nav-buttons">
            <button class="nav-button" id="prev-btn" onclick="previousStage()" title="Previous stage">â€¹</button>
            <button class="nav-button" id="next-btn" onclick="nextStage()" title="Next stage">â€º</button>
        </div>

        <!-- Footer -->
        <div class="footer" id="footer"></div>
    </div>

    <script>
        // Research Studies Data
        const studiesData = [
            { id: "1", title: "Digital Tools to Support the Systematic Review Process: An Introduction", url: "https://pmc.ncbi.nlm.nih.gov/articles/PMC12035789/#jep70100-sec-0090", tools: ["RobotReviewer", "Trialstreamer", "Abstrackr", "EPPI-Reviewer", "SWIFT ActiveScreener", "Covidence", "ExaCT", "LLM-based methods", "Millard et al. Web Tool", "OpenAI ChatGPT", "Scite", "Petal", "Perplexity", "Elicit"] },
            { id: "2", title: "AI Tools for Automating Systematic Literature Reviews", url: "https://dl.acm.org/doi/10.1145/3747912.3747962", tools: ["OpenAI ChatGPT", "Claude", "Gemini", "LLAssist", "Living SLR", "ASReview", "LLMSurver", "Review Copilot", "Literature Review Network (LRN)", "LLM-BMAS"] },
            { id: "3", title: "Leveraging artificial intelligence to enhance systematic reviews in health research: advanced tools and challenges", url: "https://systematicreviewsjournal.biomedcentral.com/articles/10.1186/s13643-024-02682-2", tools: ["OpenAI ChatGPT", "SearchRefiner", "Rayyan", "DistillerSR", "Abstrackr", "Nested Knowledge"] },
            { id: "4", title: "How to optimize the systematic review process using AI tools", url: "https://acamh.onlinelibrary.wiley.com/doi/10.1002/jcv2.12234", tools: ["OpenAI ChatGPT", "ChatPDF", "PDFGear", "Humata.ai", "HeyGPT.Chat", "RobotReviewer", "DistillerSR", "Covidence", "RCT Tagger", "Rayyan", "Thalia", "SearchSmart", "Research Rabbit App", "PaperDigest", "Consensus.app", "EvidenceHunt", "Elicit", "LitSuggest", "WiseOne.io", "Xtrct", "CitationChaser", "Scite", "Jenni.ai", "ForeFront AI Chat", "Scholarcy", "Graphical Abstract Maker"] },
            { id: "5", title: "Automating risk of bias assessment in systematic reviews", url: "https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/s12874-022-01649-y", tools: ["RobotReviewer"] },
            { id: "6", title: "Open Source Software for Efficient and Transparent Reviews", url: "https://arxiv.org/", tools: ["ASReview"] },
            { id: "7", title: "ASReview LAB v.2: Open-source text screening with multiple agents and a crowd of experts", url: "https://pubmed.ncbi.nlm.nih.gov/40926967/", tools: ["ASReview"] },
            { id: "8", title: "Machine-Learning Assisted Screening for Evidence Synthesis: A Case Study of Using the ASReview Tool", url: "https://papers.ssrn.com/sol3/papers.cfm?abstract_id=5125681", tools: ["ASReview"] },
            { id: "9", title: "Evaluation of semi-automated record screening methods for systematic reviews of prognosis studies and intervention studies", url: "https://www.cambridge.org/core/journals/research-synthesis-methods/article/evaluation-of-semiautomated-record-screening-methods-for-systematic-reviews-of-prognosis-studies-and-intervention-studies/2FB928A59A8B753BFD1C1EC2F20225E0", tools: ["ASReview"] },
            { id: "10", title: "Machine Learning-Assisted Systematic Review: A Case Study in Learning Analytics", url: "https://www.mdpi.com/2227-7102/15/11/1488", tools: ["ASReview", "OpenAI ChatGPT"] },
            { id: "11", title: "Assessing the article screening efficiency of artificial intelligence for Systematic Reviews", url: "https://doi.org/10.1016/j.jdent.2024.105259", tools: ["ASReview"] },
            { id: "12", title: "Performance of active learning models for screening prioritization in systematic reviews: a simulation study into the Average Time to Discover relevant records", url: "https://systematicreviewsjournal.biomedcentral.com/articles/10.1186/s13643-023-02257-7", tools: ["ASReview"] },
            { id: "13", title: "Performance and usability of machine learning for screening in systematic reviews: a comparative evaluation of three tools", url: "https://systematicreviewsjournal.biomedcentral.com/articles/10.1186/s13643-019-1222-2", tools: ["DistillerSR", "RobotAnalyst", "Rayyan"] },
            { id: "14", title: "Evaluation of its ML-based prioritization tool for screening", url: "https://pubmed.ncbi.nlm.nih.gov/33059590/", tools: ["DistillerSR"] },
            { id: "15", title: "Tools to support the automation of systematic reviews: a scoping review", url: "https://www.sciencedirect.com/science/article/abs/pii/S0895435621004029", tools: ["LitSuggest", "Rayyan", "Abstrackr", "BIBOT", "R software", "RobotAnalyst", "ExaCT", "NetMetaXL", "DistillerSR"] },
            { id: "16", title: "Usefulness of machine learning softwares to screen titles of systematic reviews: a methodological study", url: "https://systematicreviewsjournal.biomedcentral.com/articles/10.1186/s13643-023-02231-3", tools: ["Rayyan"] },
            { id: "17", title: "ReviewGenie: a novel automated system for systematic reviewsâ€”an exploratory study in speech and language disorders", url: "https://systematicreviewsjournal.biomedcentral.com/articles/10.1186/s13643-025-02895-z", tools: ["ReviewGenie"] },
            { id: "18", title: "Using artificial intelligence for systematic review: the example of elicit", url: "https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/s12874-025-02528-y", tools: ["Elicit"] },
            { id: "19", title: "Artificial intelligence for the science of evidence synthesis: how good are AI-powered tools for automatic literature screening?", url: "https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/s12874-025-02644-9", tools: ["OpenAI ChatGPT"] },
            { id: "20", title: "Digital tools survey includes DistillerSR", url: "https://pmc.ncbi.nlm.nih.gov/articles/PMC12035789/#jep70100-sec-0090", tools: ["DistillerSR"] },
        ];

        // Stage Data
        const stagesData = [
            {
                name: "Question & Search",
                color: "#00bfae",
                tools: [
                    { name: "OpenAI ChatGPT", value: 2, url: "https://chatgpt.com/" },
                    { name: "CitationChaser", value: 1, url: "https://estech.shinyapps.io/citationchaser/" },
                    { name: "Consensus.app", value: 1, url: "https://consensus.app/" },
                    { name: "Elicit", value: 1, url: "https://elicit.com/" },
                    { name: "EvidenceHunt", value: 1, url: "https://evidencehunt.com/chat" },
                    { name: "LitSuggest", value: 1, url: "https://www.ncbi.nlm.nih.gov/research/litsuggest/" },
                    { name: "PaperDigest", value: 1, url: "https://www.paperdigest.org/" },
                    { name: "Research Rabbit App", value: 1, url: "https://app.researchrabbit.ai/" },
                    { name: "ReviewGenie", value: 1, url: "https://reviewgenie.com.au/" },
                    { name: "SearchRefiner", value: 1, url: "https://ielab.io/searchrefiner/" },
                    { name: "SearchSmart", value: 1, url: "https://www.searchsmart.org/?~()" },
                    { name: "Thalia", value: 1, url: "" },
                    { name: "WiseOne.io", value: 1, url: "https://wiseone-your-ai-powered-reading-tool.en.softonic.com/chrome/extension" },
                    { name: "Xtrct", value: 1, url: "https://pre.xtractresearch.com/" }
                ]
            },
            {
                name: "Screening",
                color: "#ffb347",
                tools: [
                    { name: "ASReview", value: 9, url: "https://asreview.nl/" },
                    { name: "DistillerSR", value: 6, url: "https://www.distillersr.com/" },
                    { name: "Abstrackr", value: 4, url: "https://abstrackr.com/" },
                    { name: "Rayyan", value: 4, url: "https://www.rayyan.ai/" },
                    { name: "Covidence", value: 2, url: "https://www.covidence.org/" },
                    { name: "OpenAI ChatGPT", value: 2, url: "https://chatgpt.com/" },
                    { name: "RobotAnalyst", value: 2, url: "https://www.nactem.ac.uk/robotanalyst/" },
                    { name: "BIBOT", value: 1, url: "" },
                    { name: "EPPI-Reviewer", value: 1, url: "https://eppi.ioe.ac.uk/cms/Default.aspx?tabid=2914" },
                    { name: "ExaCT", value: 1, url: "" },
                    { name: "LitSuggest", value: 1, url: "https://www.ncbi.nlm.nih.gov/research/litsuggest/" },
                    { name: "LLMSurver", value: 1, url: "" },
                    { name: "Nested Knowledge", value: 1, url: "https://nested-knowledge.com/" },
                    { name: "NetMetaXL", value: 1, url: "https://www.epigear.com/index_files/metaxl.html" },
                    { name: "R software", value: 1, url: "https://www.r-project.org/" },
                    { name: "RCT Tagger", value: 1, url: "https://bond.libguides.com/az/information-tools-apps/rct-tagger" },
                    { name: "Review Copilot", value: 1, url: "https://copilot.microsoft.com/" },
                    { name: "SWIFT ActiveScreener", value: 1, url: "https://www.sciome.com/swift-activescreener/" }
                ]
            },
            {
                name: "Data Extraction & Appraisal",
                color: "#6c63ff",
                tools: [
                    { name: "RobotReviewer", value: 5, url: "https://www.robotreviewer.net/" },
                    { name: "Trialstreamer", value: 2, url: "" },
                    { name: "ACTA", value: 1, url: "" },
                    { name: "ChatPDF", value: 1, url: "https://www.chatpdf.com/" },
                    { name: "Claude", value: 1, url: "https://claude.ai/" },
                    { name: "Elicit", value: 1, url: "https://elicit.com/" },
                    { name: "ExaCT", value: 1, url: "" },
                    { name: "Gemini", value: 1, url: "https://gemini.google.com/app" },
                    { name: "HeyGPT.Chat", value: 1, url: "https://heygpt.chat/" },
                    { name: "Humata.ai", value: 1, url: "https://www.humata.ai/" },
                    { name: "Living SLR", value: 1, url: "" },
                    { name: "LLAssist", value: 1, url: "" },
                    { name: "LLM-based methods (research stage)", value: 1, url: "" },
                    { name: "Millard et al. Web Tool", value: 1, url: "" },
                    { name: "OpenAI ChatGPT", value: 1, url: "https://chatgpt.com/" },
                    { name: "PDFGear", value: 1, url: "https://www.pdfgear.com/" },
                    { name: "SciSpace GPT", value: 1, url: "https://chatgpt.com/g/g-NgAcklHd8-scispace" }
                ]
            },
            {
                name: "Synthesis & Writing",
                color: "#ff5e5b",
                tools: [
                    { name: "Elicit", value: 2, url: "https://elicit.com/" },
                    { name: "Scite", value: 2, url: "https://scite.ai/" },
                    { name: "ForeFront AI Chat", value: 1, url: "https://chat.forefront.ai/" },
                    { name: "Graphical Abstract Maker", value: 1, url: "https://mindthegraph.com/create-graphical-abstract/" },
                    { name: "Jenni.ai", value: 1, url: "https://jenni.ai/" },
                    { name: "Literature Review Network (LRN)", value: 1, url: "" },
                    { name: "LLM-BMAS", value: 1, url: "" },
                    { name: "OpenAI ChatGPT", value: 1, url: "https://chatgpt.com/" },
                    { name: "Perplexity", value: 1, url: "https://www.perplexity.ai/" },
                    { name: "Petal", value: 1, url: "https://www.petal.org/" },
                    { name: "Scholarcy", value: 1, url: "https://www.scholarcy.com/" }
                ]
            }
        ];

        let currentStageIndex = 0;
        let showingResources = false;
        let showingVisualizations = false;

        function toggleResources() {
            showingResources = !showingResources;
            showingVisualizations = false;
            if (showingResources) {
                renderResources();
                document.getElementById('stage-card').style.display = 'none';
                document.getElementById('visualizations-card').style.display = 'none';
                document.getElementById('resources-card').style.display = 'block';
                document.getElementById('nav-buttons').style.display = 'none';
                document.getElementById('stage-progress').style.display = 'none';
                document.getElementById('resources-btn').style.background = 'rgba(100, 150, 255, 0.2)';
                document.getElementById('visualizations-btn').style.background = 'rgba(255, 255, 255, 0.1)';
            } else {
                document.getElementById('stage-card').style.display = 'block';
                document.getElementById('resources-card').style.display = 'none';
                document.getElementById('nav-buttons').style.display = 'flex';
                document.getElementById('stage-progress').style.display = 'flex';
                document.getElementById('resources-btn').style.background = 'rgba(255, 255, 255, 0.1)';
                renderStage();
            }
        }

        function toggleVisualizations() {
            showingVisualizations = !showingVisualizations;
            showingResources = false;
            if (showingVisualizations) {
                renderVisualizations();
                document.getElementById('stage-card').style.display = 'none';
                document.getElementById('resources-card').style.display = 'none';
                document.getElementById('visualizations-card').style.display = 'block';
                document.getElementById('nav-buttons').style.display = 'none';
                document.getElementById('stage-progress').style.display = 'none';
                document.getElementById('visualizations-btn').style.background = 'rgba(100, 150, 255, 0.2)';
                document.getElementById('resources-btn').style.background = 'rgba(255, 255, 255, 0.1)';
            } else {
                document.getElementById('stage-card').style.display = 'block';
                document.getElementById('visualizations-card').style.display = 'none';
                document.getElementById('nav-buttons').style.display = 'flex';
                document.getElementById('stage-progress').style.display = 'flex';
                document.getElementById('visualizations-btn').style.background = 'rgba(255, 255, 255, 0.1)';
                renderStage();
            }
        }

        function renderVisualizations() {
            // Calculate tool counts from stagesData (accurate mention counts from CSV)
            const toolCounts = new Map();
            stagesData.forEach(stage => {
                stage.tools.forEach(tool => {
                    toolCounts.set(tool.name, (toolCounts.get(tool.name) || 0) + tool.value);
                });
            });
            const sortedTools = Array.from(toolCounts.entries())
                .sort((a, b) => b[1] - a[1])
                .slice(0, 15);

            const uniqueTools = toolCounts.size;  // 53 unique tools
            const totalMentions = Array.from(toolCounts.values()).reduce((a, b) => a + b, 0);  // 90 total mentions
            const totalStudiesToolCount = studiesData.reduce((sum, s) => sum + s.tools.length, 0);

            // Calculate tool popularity with percentages
            const maxCount = sortedTools[0]?.[1] || 1;
            const toolPopularityWithPercentages = sortedTools.map(([tool, count]) => ({
                tool,
                count,
                percentage: ((count / maxCount) * 100).toFixed(1),
                actualPercentage: ((count / totalStudiesToolCount) * 100).toFixed(1)
            }));

            // Cross-stage tool analysis
            const toolStages = new Map();
            stagesData.forEach(stage => {
                stage.tools.forEach(tool => {
                    if (!toolStages.has(tool.name)) {
                        toolStages.set(tool.name, new Set());
                    }
                    toolStages.get(tool.name).add(stage.name);
                });
            });
            const multiStageTools = Array.from(toolStages.entries())
                .filter(([_, stages]) => stages.size > 1)
                .sort((a, b) => b[1].size - a[1].size)
                .slice(0, 10);

            const visualizationsContent = document.getElementById('visualizations-content');
            visualizationsContent.innerHTML = `
                <div style="padding: 0;">
                    <h3 style="font-size: 1.25rem; font-weight: 700; color: #fff; margin-bottom: 1.5rem;">Most Featured Tools in Research</h3>
                    <div style="margin-bottom: 3rem;">
                        ${toolPopularityWithPercentages.map(({ tool, percentage, actualPercentage }) => `
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem;">
                                <div style="width: 8rem; font-size: 0.875rem; font-weight: 600; color: #fff; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${tool}</div>
                                <div style="flex: 1; background: rgba(255, 255, 255, 0.1); border-radius: 9999px; height: 2rem; display: flex; align-items: center; overflow: hidden;">
                                    <div style="height: 100%; background: linear-gradient(90deg, rgb(0, 212, 255), rgb(100, 150, 255)); width: ${percentage}%; display: flex; align-items: center; justify-content: flex-end; padding-right: 0.75rem; transition: width 0.5s ease;">
                                        <span style="font-size: 0.75rem; font-weight: 700; color: white;">${actualPercentage}%</span>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <h3 style="font-size: 1.25rem; font-weight: 700; color: #fff; margin-bottom: 1.5rem;">Cross-Stage Tool Network Analysis</h3>
                    <div style="background: linear-gradient(135deg, rgba(20, 30, 48, 0.5), rgba(20, 30, 48, 0.3)); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 2.5rem; margin-bottom: 2.5rem; display: grid; grid-template-columns: 220px 1fr 380px; gap: 2.5rem; align-items: start; position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent); pointer-events: none;"></div>
                        
                        <!-- Left Sidebar: Tool Legend -->
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <div style="font-size: 0.8rem; color: rgba(255, 255, 255, 0.6); font-weight: 600; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 0.5rem;">Multi-Stage Tools</div>
                            <div id="tool-legend" style="display: flex; flex-direction: column; gap: 0.75rem; max-height: 550px; overflow-y: auto; padding-right: 0.75rem;">
                            </div>
                        </div>

                        <!-- Center: Network Visualization -->
                        <div style="position: relative;">
                            <div style="font-size: 0.8rem; color: rgba(255, 255, 255, 0.6); font-weight: 600; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 1rem;">Interactive Network</div>
                            <svg id="network-svg" style="width: 100%; height: 550px; background: radial-gradient(ellipse at center, rgba(0, 80, 120, 0.15) 0%, rgba(0, 0, 0, 0.4) 100%); border-radius: 16px; border: 1px solid rgba(100, 200, 255, 0.2); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 0 40px rgba(100, 200, 255, 0.05); display: block;"></svg>
                        </div>

                        <!-- Right: Tool Details -->
                        <div id="tool-details" style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.02)); backdrop-filter: blur(10px); border: 1px solid rgba(100, 200, 255, 0.2); border-radius: 16px; padding: 2rem; min-height: 550px; display: flex; align-items: center; justify-content: center; position: relative;">
                            <div style="position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent, rgba(100, 200, 255, 0.3), transparent); pointer-events: none;"></div>
                            <div style="text-align: center; color: rgba(255, 255, 255, 0.5);">
                                <div style="font-size: 2.5rem; margin-bottom: 1rem; opacity: 0.4;">âœ¨</div>
                                <p style="font-size: 0.95rem; font-weight: 500;">Select a tool to see its stage connections</p>
                            </div>
                        </div>
                    </div>

                    <h3 style="font-size: 1.25rem; font-weight: 700; color: #fff; margin-bottom: 1.5rem;">Tools Distribution by Stage</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2.5rem;">
                        ${stagesData.map((stage, stageIdx) => {
                            const maxTools = Math.max(...stagesData.map(s => s.tools.length));
                            const percentage = (stage.tools.length / maxTools) * 100;
                            const freqTools = stage.tools.filter(t => t.value >= 2).length;
                            const singleTools = stage.tools.filter(t => t.value === 1).length;
                            return `
                                <div style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02)); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 0.5rem; padding: 1.5rem; transition: all 0.3s; cursor: pointer;">
                                    <div style="display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 1rem;">
                                        <div>
                                            <h4 style="font-weight: bold; font-size: 1.125rem; margin-bottom: 0.25rem; color: ${stage.color};">${stage.name}</h4>
                                            <p style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.5);">Stage ${stageIdx + 1}</p>
                                        </div>
                                        <div style="text-align: right;">
                                            <div style="font-size: 1.75rem; font-weight: bold; color: white;">${stage.tools.length}</div>
                                            <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.5);">tools</div>
                                        </div>
                                    </div>
                                    <div style="width: 100%; background: rgba(255, 255, 255, 0.1); border-radius: 9999px; height: 0.5rem; margin-bottom: 1rem; overflow: hidden;">
                                        <div style="height: 100%; border-radius: 9999px; width: ${percentage}%; background: linear-gradient(90deg, ${stage.color}, ${stage.color}99); transition: width 0.5s ease;"></div>
                                    </div>
                                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.75rem;">
                                        ${stage.tools.slice(0, 6).map((tool, idx) => `
                                            <div class="tool-circle-container" style="width: 32px; height: 32px;">
                                                <div class="tool-circle-tooltip">${tool.name}</div>
                                                <div style="width: 100%; height: 100%; border-radius: 50%; background: ${stage.color}80; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.75rem; font-weight: bold; cursor: pointer; transition: transform 0.2s; user-select: none;">
                                                    ${idx + 1}
                                                </div>
                                            </div>
                                        `).join('')}
                                        ${stage.tools.length > 6 ? `
                                            <div class="tool-circle-container" style="width: 32px; height: 32px;">
                                                <div class="tool-circle-tooltip">+${stage.tools.length - 6} more tools</div>
                                                <div style="width: 100%; height: 100%; border-radius: 50%; background: ${stage.color}40; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; border: 2px dashed ${stage.color}; cursor: pointer; user-select: none;">
                                                    +
                                                </div>
                                            </div>
                                        ` : ''}
                                    </div>
                                    <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.6);">
                                        ${freqTools} frequently used â€¢ ${singleTools} mentioned once
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>

                    <h3 style="font-size: 1.25rem; font-weight: 700; color: #fff; margin-bottom: 1.5rem;">Research Coverage & Impact</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="background: linear-gradient(135deg, rgba(34, 211, 238, 0.1), rgba(34, 211, 238, 0.05)); border: 1px solid rgba(34, 211, 238, 0.3); border-radius: 0.5rem; padding: 1.5rem; transition: all 0.3s;">
                            <div style="display: flex; align-items: flex-end; justify-content: space-between; margin-bottom: 1rem;">
                                <div>
                                    <div style="font-size: 0.75rem; color: rgb(34, 211, 238); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">Research Studies</div>
                                    <div style="font-size: 2.25rem; font-weight: bold; color: rgb(34, 211, 238);">${studiesData.length}</div>
                                </div>
                                <div style="font-size: 3rem; opacity: 0.2;">ðŸ“š</div>
                            </div>
                            <div style="height: 0.25rem; background: linear-gradient(90deg, rgb(34, 211, 238), transparent); border-radius: 9999px; margin-bottom: 0.75rem;"></div>
                            <p style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.6);">Peer-reviewed publications analyzed</p>
                        </div>
                        <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05)); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 0.5rem; padding: 1.5rem; transition: all 0.3s;">
                            <div style="display: flex; align-items: flex-end; justify-content: space-between; margin-bottom: 1rem;">
                                <div>
                                    <div style="font-size: 0.75rem; color: rgb(59, 130, 246); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">Unique Tools</div>
                                    <div style="font-size: 2.25rem; font-weight: bold; color: rgb(59, 130, 246);">${uniqueTools}</div>
                                </div>
                                <div style="font-size: 3rem; opacity: 0.2;">ðŸ› ï¸</div>
                            </div>
                            <div style="height: 0.25rem; background: linear-gradient(90deg, rgb(59, 130, 246), transparent); border-radius: 9999px; margin-bottom: 0.75rem;"></div>
                            <p style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.6);">Distinct AI tools documented</p>
                        </div>
                        <div style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(168, 85, 247, 0.05)); border: 1px solid rgba(168, 85, 247, 0.3); border-radius: 0.5rem; padding: 1.5rem; transition: all 0.3s;">
                            <div style="display: flex; align-items: flex-end; justify-content: space-between; margin-bottom: 1rem;">
                                <div>
                                    <div style="font-size: 0.75rem; color: rgb(168, 85, 247); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem;">Tool Mentions</div>
                                    <div style="font-size: 2.25rem; font-weight: bold; color: rgb(168, 85, 247);">${totalMentions}</div>
                                </div>
                                <div style="font-size: 3rem; opacity: 0.2;">â­</div>
                            </div>
                            <div style="height: 0.25rem; background: linear-gradient(90deg, rgb(168, 85, 247), transparent); border-radius: 9999px; margin-bottom: 0.75rem;"></div>
                            <p style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.6);">Across all systematic review stages</p>
                        </div>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 0.5rem; padding: 1.5rem;">
                        <p style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.7); margin-bottom: 1rem; font-weight: 600;">ðŸ“Š Coverage Insights</p>
                        <div style="display: flex; flex-direction: column; gap: 0.75rem; font-size: 0.875rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="color: rgba(255, 255, 255, 0.6);">Tools per study (avg)</span>
                                <span style="font-weight: 600; color: white;">${(studiesData.reduce((sum, s) => sum + s.tools.length, 0) / studiesData.length).toFixed(1)}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="color: rgba(255, 255, 255, 0.6);">Studies per tool (avg)</span>
                                <span style="font-weight: 600; color: white;">${(totalMentions / uniqueTools).toFixed(1)}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="color: rgba(255, 255, 255, 0.6);">Research penetration</span>
                                <span style="font-weight: 600; color: white;">${((uniqueTools / totalMentions) * 100).toFixed(1)}%</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Initialize network visualization after DOM is rendered
            setTimeout(() => {
                initializeNetworkVisualization(toolStages);
            }, 100);
        }

        function renderResources() {
            document.getElementById('resources-count').textContent = `${studiesData.length} studies analyzed in this research`;
            const resourcesContent = document.getElementById('resources-content');
            resourcesContent.innerHTML = `
                <div style="display: grid; grid-template-columns: 1fr; gap: 1.5rem;">
                    ${studiesData.map(study => `
                        <div style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); padding: 1.25rem; border-radius: 0.5rem; transition: all 0.3s ease;">
                            <a href="${study.url}" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit; display: flex; align-items: flex-start; justify-content: space-between; gap: 1rem; margin-bottom: 0.75rem;">
                                <div style="flex: 1;">
                                    <div style="font-weight: 600; color: #fff; margin-bottom: 0.5rem;">${study.title}</div>
                                    <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.4); word-break: break-all;">${study.url}</div>
                                </div>
                                <svg style="width: 1.25rem; height: 1.25rem; color: rgba(255, 255, 255, 0.6); flex-shrink: 0; margin-top: 0.25rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                </svg>
                            </a>
                            ${study.tools.length > 0 ? `
                                <div style="padding-top: 0.75rem; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                                    <div style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.6); margin-bottom: 0.5rem; font-weight: 600;">Featured Tools:</div>
                                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                        ${study.tools.map(tool => `<span style="font-size: 0.75rem; background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); padding: 0.25rem 0.75rem; border-radius: 9999px;">${tool}</span>`).join('')}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function nextStage() {
            currentStageIndex = (currentStageIndex + 1) % stagesData.length;
            renderStage();
        }

        function previousStage() {
            currentStageIndex = (currentStageIndex - 1 + stagesData.length) % stagesData.length;
            renderStage();
        }

        function goToStage(index) {
            currentStageIndex = index;
            renderStage();
        }

        let networkData = null;
        let selectedTool = null;

        function initializeNetworkVisualization(toolStages) {
            // Get tools that appear in multiple stages
            const multiStageTools = Array.from(toolStages.entries())
                .filter(([_, stages]) => stages.size > 1)
                .sort((a, b) => b[1].size - a[1].size);
            
            networkData = { toolStages, multiStageTools };
            
            // Create legend with tool names
            const legend = document.getElementById('tool-legend');
            legend.innerHTML = multiStageTools.map(([toolName, stages]) => {
                const count = stages.size;
                const isSelected = selectedTool === toolName;
                return `
                    <button onclick="selectToolNetwork('${toolName.replace(/'/g, "\\'")}', event)" 
                            style="padding: 1rem; 
                                   background: ${isSelected ? 'linear-gradient(135deg, rgba(0, 212, 255, 0.25), rgba(100, 150, 255, 0.15))' : 'rgba(255, 255, 255, 0.04)'}; 
                                   border: 1px solid ${isSelected ? 'rgba(0, 212, 255, 0.4)' : 'rgba(255, 255, 255, 0.1)'}; 
                                   color: ${isSelected ? 'rgb(0, 212, 255)' : 'rgba(255, 255, 255, 0.8)'}; 
                                   border-radius: 12px; 
                                   font-weight: ${isSelected ? '700' : '600'}; 
                                   font-size: 0.85rem; 
                                   cursor: pointer; 
                                   transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
                                   width: 100%;
                                   text-align: left;
                                   display: flex;
                                   align-items: center;
                                   justify-content: space-between;
                                   gap: 0.5rem;
                                   position: relative;
                                   overflow: hidden;
                                   box-shadow: ${isSelected ? '0 8px 24px rgba(0, 212, 255, 0.15)' : 'none'};">
                        <span style="flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${toolName}</span>
                        <span style="background: ${isSelected ? 'rgba(0, 212, 255, 0.3)' : 'rgba(255, 255, 255, 0.1)'}; padding: 0.35rem 0.65rem; border-radius: 6px; font-size: 0.75rem; font-weight: 700; flex-shrink: 0; border: 1px solid ${isSelected ? 'rgba(0, 212, 255, 0.5)' : 'transparent'};">${count}</span>
                    </button>
                `;
            }).join('');
            
            // Render network
            renderNetworkVisualization();
        }

        function selectToolNetwork(toolName, event) {
            selectedTool = selectedTool === toolName ? null : toolName;
            updateToolDetails();
            renderNetworkVisualization();
        }

        function updateToolDetails() {
            const detailsDiv = document.getElementById('tool-details');
            
            if (!selectedTool) {
                detailsDiv.innerHTML = `
                    <div style="text-align: center; color: rgba(255, 255, 255, 0.5);">
                        <p style="font-size: 0.875rem;">Select a tool to see its stage connections</p>
                    </div>
                `;
                return;
            }

            const stages = networkData.toolStages.get(selectedTool);
            const stagesList = Array.from(stages).map(stageName => {
                const stage = stagesData.find(s => s.name === stageName);
                return `
                    <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem;">
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: ${stage?.color || '#999'};"></div>
                        <span style="color: #fff; font-size: 0.875rem;">${stageName}</span>
                    </div>
                `;
            }).join('');

            detailsDiv.innerHTML = `
                <div style="width: 100%; animation: fadeIn 0.3s ease-out;">
                    <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #00d4ff; box-shadow: 0 0 12px rgba(0, 212, 255, 0.6);"></div>
                        <div style="font-size: 1.1rem; font-weight: 700; color: rgb(0, 212, 255); word-wrap: break-word;">${selectedTool}</div>
                    </div>
                    <div style="font-size: 0.7rem; color: rgba(255, 255, 255, 0.5); margin-bottom: 1.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Appears in ${stages.size} Stage${stages.size > 1 ? 's' : ''}</div>
                    <div style="border-top: 1px solid rgba(100, 200, 255, 0.2); padding-top: 1.5rem;">
                        ${stagesList}
                    </div>
                </div>
            `;
        }

        function renderNetworkVisualization() {
            if (!networkData) return;
            
            const svg = d3.select('#network-svg');
            svg.selectAll('*').remove();
            
            const svgNode = svg.node();
            const width = svgNode.clientWidth || 800;
            const height = svgNode.clientHeight || 500;
            
            // Set SVG viewBox and size
            svg.attr('viewBox', `0 0 ${width} ${height}`);
            svg.attr('width', width);
            svg.attr('height', height);
            
            // Create nodes for tools and stages
            const nodes = [];
            const nodeMap = new Map();
            const links = [];
            let stagesToDisplay = [];
            
            // Determine which stages to display
            if (selectedTool) {
                const connectedStages = networkData.toolStages.get(selectedTool);
                stagesToDisplay = stagesData.filter(stage => connectedStages.has(stage.name));
            } else {
                stagesToDisplay = stagesData;
            }
            
            // Add stage nodes with distributed starting positions
            stagesToDisplay.forEach((stage, idx) => {
                const node = {
                    id: `stage-${idx}`,
                    name: stage.name,
                    type: 'stage',
                    color: stage.color,
                    x: width / 2 + (idx - (stagesToDisplay.length - 1) / 2) * (width / (stagesToDisplay.length + 1)),
                    y: height * 0.25
                };
                nodes.push(node);
                nodeMap.set(node.id, node);
            });
            
            // Add tool nodes and links to stages
            if (selectedTool) {
                const stages = networkData.toolStages.get(selectedTool);
                if (stages) {
                    const toolNode = {
                        id: `tool-${selectedTool}`,
                        name: selectedTool,
                        type: 'tool',
                        stageCount: stages.size,
                        color: '#00d4ff',
                        x: width / 2,
                        y: height * 0.75
                    };
                    nodes.push(toolNode);
                    nodeMap.set(toolNode.id, toolNode);
                    
                    // Create links to stages
                    Array.from(stages).forEach(stageName => {
                        const stageNode = nodes.find(n => n.name === stageName && n.type === 'stage');
                        if (stageNode) {
                            links.push({
                                source: toolNode.id,
                                target: stageNode.id,
                                type: 'connection'
                            });
                        }
                    });
                }
            } else {
                // Show all multi-stage tools
                networkData.multiStageTools.forEach(([toolName, stages], idx) => {
                    const angle = (idx / networkData.multiStageTools.length) * Math.PI * 2;
                    const radius = height * 0.3;
                    const toolNode = {
                        id: `tool-${toolName}`,
                        name: toolName,
                        type: 'tool',
                        stageCount: stages.size,
                        color: 'rgba(34, 211, 238, 0.7)',
                        x: width / 2 + Math.cos(angle) * radius,
                        y: height / 2 + Math.sin(angle) * radius
                    };
                    nodes.push(toolNode);
                    nodeMap.set(toolNode.id, toolNode);
                    
                    // Create links to stages
                    Array.from(stages).forEach(stageName => {
                        const stageNode = nodes.find(n => n.name === stageName && n.type === 'stage');
                        if (stageNode) {
                            links.push({
                                source: toolNode.id,
                                target: stageNode.id,
                                type: 'connection'
                            });
                        }
                    });
                });
            }
            
            const simulation = d3.forceSimulation(nodes)
                .force('link', d3.forceLink(links).id(d => d.id).distance(120).strength(0.3))
                .force('charge', d3.forceManyBody().strength(-600))
                .force('center', d3.forceCenter(width / 2, height / 2))
                .force('collision', d3.forceCollide(d => d.type === 'stage' ? 50 : 30 + (d.stageCount || 1) * 6))
                .force('x', d3.forceX(width / 2).strength(d => d.type === 'stage' ? 0.05 : 0.1))
                .force('y', d3.forceY(height / 2).strength(d => d.type === 'stage' ? 0.05 : 0.1));
            
            simulation.alpha(1).restart();
            
            const g = svg.append('g');
            
            // Add defs for gradients and filters
            const defs = svg.append('defs');
            
            // Glow filter for nodes
            const glowFilter = defs.append('filter')
                .attr('id', 'glow-effect');
            glowFilter.append('feGaussianBlur')
                .attr('stdDeviation', 4)
                .attr('result', 'coloredBlur');
            glowFilter.append('feMerge').selectAll('feMergeNode')
                .data([0, 1])
                .enter()
                .append('feMergeNode')
                .attr('in', d => d === 0 ? 'coloredBlur' : 'SourceGraphic');
            
            // Draw links with enhanced styling
            const link = g.selectAll('line.connection')
                .data(links)
                .enter()
                .append('line')
                .attr('class', 'connection')
                .attr('stroke', d => {
                    if (selectedTool && d.source.type === 'tool') {
                        return 'url(#gradient-' + d.source.index + ')';
                    }
                    return 'rgba(100, 200, 255, 0.25)';
                })
                .attr('stroke-width', d => selectedTool && d.source.type === 'tool' ? 3 : 1.5)
                .attr('stroke-opacity', d => selectedTool && d.source.type === 'tool' ? 0.8 : 0.4)
                .style('pointer-events', 'none')
                .attr('stroke-linecap', 'round');
            
            // Draw stage nodes (larger, with enhanced styling)
            g.selectAll('.stage-node')
                .data(nodes.filter(n => n.type === 'stage'))
                .enter()
                .append('circle')
                .attr('class', 'stage-node')
                .attr('r', 38)
                .attr('fill', d => d.color + '25')
                .attr('stroke', d => d.color)
                .attr('stroke-width', 2.5)
                .style('cursor', 'pointer')
                .style('transition', 'all 0.3s ease')
                .on('mouseover', function(event, d) {
                    d3.select(this)
                        .transition()
                        .duration(200)
                        .attr('r', 42)
                        .attr('stroke-width', 3)
                        .attr('filter', 'drop-shadow(0 0 12px ' + d.color + ')');
                })
                .on('mouseout', function(event, d) {
                    d3.select(this)
                        .transition()
                        .duration(200)
                        .attr('r', 38)
                        .attr('stroke-width', 2.5)
                        .attr('filter', 'none');
                });
            
            // Draw tool nodes with creative styling
            g.selectAll('.tool-node')
                .data(nodes.filter(n => n.type === 'tool'))
                .enter()
                .append('circle')
                .attr('class', 'tool-node')
                .attr('r', d => selectedTool === d.name ? 16 + d.stageCount * 2 : 13 + d.stageCount * 2)
                .attr('fill', '#00d4ff')
                .attr('stroke', '#ffffff')
                .attr('stroke-width', d => selectedTool === d.name ? 3 : 2)
                .style('cursor', 'pointer')
                .attr('filter', d => selectedTool === d.name ? 'url(#glow-effect)' : 'none')
                .on('mouseover', function(event, d) {
                    d3.select(this)
                        .transition()
                        .duration(200)
                        .attr('r', d => 16 + d.stageCount * 2.5)
                        .attr('filter', 'drop-shadow(0 0 10px rgba(0, 212, 255, 0.8))');
                    
                    // Highlight connected links
                    link.attr('stroke-opacity', l => {
                        return (l.source === d || l.target === d) ? 0.9 : 0.15;
                    });
                })
                .on('mouseout', function(event, d) {
                    d3.select(this)
                        .transition()
                        .duration(200)
                        .attr('r', d => selectedTool === d.name ? 16 + d.stageCount * 2 : 13 + d.stageCount * 2)
                        .attr('filter', d => selectedTool === d.name ? 'url(#glow-effect)' : 'none');
                    
                    // Reset link opacity
                    link.attr('stroke-opacity', d => selectedTool && d.source.type === 'tool' ? 0.8 : 0.4);
                });
            
            // Add stage labels
            const stageLabels = g.selectAll('.stage-label')
                .data(nodes.filter(n => n.type === 'stage'))
                .enter()
                .append('text')
                .attr('class', 'stage-label')
                .attr('text-anchor', 'middle')
                .attr('dy', '0.3em')
                .attr('font-size', '0.65rem')
                .attr('font-weight', '600')
                .attr('fill', '#fff')
                .attr('pointer-events', 'none')
                .text(d => {
                    const parts = d.name.split(' & ');
                    return parts.length > 1 ? parts[0] : d.name;
                });
            
            // Add tool number labels
            const toolLabels = g.selectAll('.tool-label')
                .data(nodes.filter(n => n.type === 'tool').map((node, idx) => ({...node, index: idx + 1})))
                .enter()
                .append('text')
                .attr('class', 'tool-label')
                .attr('text-anchor', 'middle')
                .attr('dy', '0.3em')
                .attr('font-size', '0.7rem')
                .attr('font-weight', '700')
                .attr('fill', '#fff')
                .attr('pointer-events', 'none')
                .text(d => d.index);
            
            simulation.on('tick', () => {
                // Update node positions with bounds
                nodes.forEach(d => {
                    d.x = Math.max(50, Math.min(width - 50, d.x));
                    d.y = Math.max(50, Math.min(height - 50, d.y));
                });
                
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);
                
                g.selectAll('circle')
                    .attr('cx', d => d.x)
                    .attr('cy', d => d.y);
                
                stageLabels
                    .attr('x', d => d.x)
                    .attr('y', d => d.y);
                    
                toolLabels
                    .attr('x', d => d.x)
                    .attr('y', d => d.y);
            });
        }

        function renderStage() {
            const stage = stagesData[currentStageIndex];

            // Render progress indicators
            renderProgressIndicators();

            // Render stage header
            const headerDiv = document.getElementById('stage-header');
            headerDiv.innerHTML = `
                <h2>${stage.name}</h2>
                <p>Stage ${currentStageIndex + 1} of ${stagesData.length}</p>
            `;
            headerDiv.style.backgroundColor = `${stage.color}20`;
            headerDiv.style.borderBottomColor = `${stage.color}40`;

            // Calculate metrics
            const toolsFreq2Plus = stage.tools.filter(t => t.value >= 2).length;
            const toolsFreq1 = stage.tools.filter(t => t.value === 1).length;
            const totalFrequency = stage.tools.reduce((sum, t) => sum + t.value, 0);
            const topTools = [...stage.tools].sort((a, b) => b.value - a.value).slice(0, 3);

            // Render content
            const contentDiv = document.getElementById('stage-content');
            contentDiv.innerHTML = `
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Total Tools</div>
                        <div class="metric-value">${stage.tools.length}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Frequently Used (â‰¥2)</div>
                        <div class="metric-value">${toolsFreq2Plus}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Total Usage Count</div>
                        <div class="metric-value">${totalFrequency}</div>
                    </div>
                </div>

                <div class="tools-section">
                    <h3>Most Utilized Tools</h3>
                    <div class="top-tools-grid">
                        ${topTools.map((tool, idx) => `
                            <div style="background: rgba(255, 255, 255, 0.04); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 12px; padding: 1.25rem; transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1); display: flex; align-items: center; justify-content: space-between; gap: 1rem; position: relative; overflow: hidden;">
                                <div style="display: flex; align-items: center; gap: 1rem; flex: 1;">
                                    <div style="width: 2.5rem; height: 2.5rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; color: white; flex-shrink: 0; font-size: 0.85rem; background-color: ${stage.color}; border: 1px solid rgba(255, 255, 255, 0.1);">
                                        ${idx + 1}
                                    </div>
                                    <div style="flex: 1; min-width: 0;">
                                        <div style="font-weight: 600; color: #fff; margin-bottom: 0.25rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${tool.name}</div>
                                        <div style="font-size: 0.8rem; color: rgba(255, 255, 255, 0.55); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Used in ${tool.value} ${tool.value === 1 ? 'study' : 'studies'}</div>
                                    </div>
                                </div>
                                ${tool.url ? `
                                    <a href="${tool.url}" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: rgba(255, 255, 255, 0.5); transition: color 0.3s ease; flex-shrink: 0; margin-left: auto;">
                                        <svg style="width: 1.25rem; height: 1.25rem; color: rgba(255, 255, 255, 0.5); transition: color 0.3s ease;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                        </svg>
                                    </a>
                                ` : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="tools-section">
                    <h3>All Tools (${stage.tools.length})</h3>
                    <div class="all-tools-grid">
                        ${stage.tools.map(tool => `
                            ${tool.url ? `
                                <a href="${tool.url}" target="_blank" rel="noopener noreferrer" class="all-tool-item">
                                    <span>${tool.name}</span>
                                    <span class="tool-frequency-badge">${tool.value}</span>
                                </a>
                            ` : `
                                <div class="all-tool-item" style="pointer-events: none; cursor: default; color: inherit;">
                                    <span>${tool.name}</span>
                                    <span class="tool-frequency-badge">${tool.value}</span>
                                </div>
                            `}
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderProgressIndicators() {
            const progressDiv = document.getElementById('stage-progress');
            progressDiv.innerHTML = stagesData.map((stage, idx) => {
                const wrapper = document.createElement('div');
                wrapper.className = 'stage-button-wrapper';
                
                const button = document.createElement('button');
                button.className = `stage-button ${idx === currentStageIndex ? 'active' : ''}`;
                button.textContent = `Stage ${idx + 1}`;
                button.onclick = () => goToStage(idx);
                
                if (idx === currentStageIndex) {
                    button.style.backgroundColor = stagesData[idx].color;
                    button.style.color = 'white';
                }
                
                wrapper.appendChild(button);
                
                if (idx < stagesData.length - 1) {
                    const divider = document.createElement('div');
                    divider.className = 'stage-divider';
                    wrapper.appendChild(divider);
                }
                
                progressDiv.appendChild(wrapper);
                return wrapper;
            }).length > 0 ? null : progressDiv.innerHTML;

            // Manually build HTML
            let html = '';
            stagesData.forEach((stage, idx) => {
                html += `
                    <div class="stage-button-wrapper">
                        <button class="stage-button ${idx === currentStageIndex ? 'active' : ''}" 
                                onclick="goToStage(${idx})"
                                style="${idx === currentStageIndex ? `background-color: ${stage.color}; color: white;` : ''}"
                        >Stage ${idx + 1}</button>
                        ${idx < stagesData.length - 1 ? '<div class="stage-divider"></div>' : ''}
                    </div>
                `;
            });
            progressDiv.innerHTML = html;
        }

        function updateFooter() {
            const totalFrequency = stagesData.reduce((sum, stage) => 
                sum + stage.tools.reduce((t, tool) => t + tool.value, 0), 0);
            document.getElementById('footer').innerHTML = `
                <div style="text-align: center; font-size: 0.875rem; color: rgba(255, 255, 255, 0.6); line-height: 1.6;">
                    <p style="margin-bottom: 0.5rem;">
                        <strong>Disclaimer:</strong> This mapping is not an official research study. It is an independent exploratory review based on publicly available sources.
                    </p>
                    <p style="margin-bottom: 0.5rem;">
                        Â© 2025 Basma Qenab. All rights reserved.
                    </p>
                    <p style="margin-bottom: 0;">
                        Last updated: November 2025. For collaboration opportunities, connect with me on <a href="https://linkedin.com" target="_blank" style="color: #00bfae; text-decoration: none; font-weight: 500;">LinkedIn</a>.
                    </p>
                </div>
            `;
        }

        // Initialize
        renderStage();
        updateFooter();
    </script>
</body>
</html>
